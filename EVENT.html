<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Event Management – Date‑Wise Search</title>
  <style>
    :root {
      --bg: #0f172a;         /* slate-900 */
      --panel: #111827;      /* gray-900 */
      --muted: #6b7280;      /* gray-500 */
      --text: #e5e7eb;       /* gray-200 */
      --accent: #22c55e;     /* green-500 */
      --accent-2: #60a5fa;   /* blue-400 */
      --chip: #1f2937;       /* gray-800 */
      --border: #374151;     /* gray-700 */
    }
    html, body { height: 100%; }
    body {
      margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: linear-gradient(180deg, #0b1220, var(--bg));
      color: var(--text);
    }
    .container { max-width: 1100px; margin: 0 auto; padding: 24px; }
    header { display:flex; align-items:center; gap:16px; margin-bottom: 18px; }
    header h1 { font-size: clamp(20px, 3.5vw, 32px); margin: 0; letter-spacing: .3px; }
    header .badge { font-size: 12px; background: var(--chip); border: 1px solid var(--border); padding: 4px 8px; border-radius: 999px; color: var(--muted); }

    .panel { background: rgba(17,24,39,.7); backdrop-filter: blur(6px); border: 1px solid var(--border); border-radius: 16px; padding: 16px; }

    .filters { display: grid; grid-template-columns: repeat(12, 1fr); gap: 12px; align-items:end; }
    .field { display:flex; flex-direction:column; gap:6px; grid-column: span 3; }
    .field.wide { grid-column: span 6; }
    .field.full { grid-column: 1 / -1; }
    .label { font-size: 12px; color: var(--muted); }
    .input, select { background: #0b1020; color: var(--text); border: 1px solid var(--border); border-radius: 10px; padding: 10px 12px; outline: none; }
    .input:focus, select:focus { border-color: var(--accent-2); box-shadow: 0 0 0 3px rgba(96,165,250,.15); }
    .controls { display:flex; gap:10px; align-items:center; }
    .btn { border: 1px solid var(--border); background: #0b1020; color: var(--text); padding: 10px 14px; border-radius: 12px; cursor: pointer; }
    .btn:hover { border-color: var(--accent-2); }
    .btn.primary { background: linear-gradient(135deg, var(--accent-2), #38bdf8); border: none; color: #0b1020; font-weight: 600; }
    .segmented { display:inline-flex; border: 1px solid var(--border); border-radius: 12px; overflow:hidden; }
    .segmented button { background: transparent; border: 0; color: var(--muted); padding: 8px 12px; cursor: pointer; }
    .segmented button.active { background: var(--chip); color: var(--text); }

    .row { display:flex; align-items:center; justify-content:space-between; gap:12px; margin: 14px 2px 6px; }
    .count { font-size: 13px; color: var(--muted); }

    table { width: 100%; border-collapse: collapse; margin-top: 8px; }
    th, td { text-align: left; padding: 12px; border-bottom: 1px dashed var(--border); }
    th { font-size: 12px; color: var(--muted); font-weight: 600; }
    tr:hover td { background: rgba(96,165,250,.06); }
    .chip { background: var(--chip); border:1px solid var(--border); padding: 2px 8px; border-radius:999px; font-size: 12px; color: #cbd5e1; }

    .empty { text-align:center; color: var(--muted); padding: 28px; border: 1px dashed var(--border); border-radius: 12px; margin-top: 8px; }

    @media (max-width: 900px) {
      .field { grid-column: span 6; }
      .field.wide { grid-column: span 12; }
    }
    @media (max-width: 640px) {
      .field { grid-column: span 12; }
      header { flex-direction: column; align-items:flex-start; gap:8px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <svg width="34" height="34" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path d="M7 2v3M17 2v3M3.5 9h17M5 6h14a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2Z" stroke="#60a5fa" stroke-width="1.5" stroke-linecap="round"/>
      </svg>
      <div>
        <h1>Event Management – Date‑Wise Search</h1>
        <div class="badge" aria-live="polite">Client‑side filtering • No backend required</div>
      </div>
    </header>

    <!-- Filters Panel -->
    <section class="panel" aria-label="Filters">
      <div class="filters">
        <!-- Mode toggle: Single Day vs Range -->
        <div class="field" style="grid-column: span 4;">
          <div class="label">Date mode</div>
          <div class="segmented" role="tablist" aria-label="Date mode">
            <button id="mode-single" role="tab" class="active" aria-selected="true">Single day</button>
            <button id="mode-range" role="tab" aria-selected="false">Date range</button>
          </div>
        </div>

        <!-- Single day input -->
        <div class="field" id="field-single" style="grid-column: span 4;">
          <label class="label" for="date">On date</label>
          <input class="input" id="date" type="date" />
        </div>

        <!-- Range inputs -->
        <div class="field" id="field-start" style="display:none; grid-column: span 4;">
          <label class="label" for="startDate">Start date</label>
          <input class="input" id="startDate" type="date" />
        </div>
        <div class="field" id="field-end" style="display:none; grid-column: span 4;">
          <label class="label" for="endDate">End date</label>
          <input class="input" id="endDate" type="date" />
        </div>

        <div class="field wide">
          <label class="label" for="q">Search (title, location…)</label>
          <input class="input" id="q" type="search" placeholder="Type to filter…" />
        </div>

        <div class="field">
          <label class="label" for="category">Category</label>
          <select id="category">
            <option value="">All</option>
            <option>Conference</option>
            <option>Workshop</option>
            <option>Webinar</option>
            <option>Meetup</option>
            <option>Festival</option>
          </select>
        </div>

        <div class="field">
          <label class="label" for="status">Status</label>
          <select id="status">
            <option value="">Any</option>
            <option value="upcoming">Upcoming</option>
            <option value="past">Past</option>
          </select>
        </div>

        <div class="field">
          <div class="label">&nbsp;</div>
          <div class="controls">
            <button class="btn" id="clearBtn" type="button" title="Reset filters">Clear</button>
            <button class="btn primary" id="todayBtn" type="button" title="Jump to today">Today</button>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="count" id="count">Loading events…</div>
        <div class="count">Sorted by date ↑</div>
      </div>

      <div class="table-wrap">
        <table aria-describedby="count" id="eventsTable">
          <thead>
            <tr>
              <th>Date</th>
              <th>Title</th>
              <th>Time</th>
              <th>Location</th>
              <th>Category</th>
            </tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>
        <div id="empty" class="empty" style="display:none;">No events match your filters.</div>
      </div>
    </section>

    <p style="color:var(--muted); font-size:12px; margin-top:12px;">Tip: Type a city or keyword, choose a category, and switch between single‑day and range mode. Works fully offline in the browser.</p>
  </div>

  <script>
    // --- Sample data (replace with your data or fetch from API) ---
    const SAMPLE_EVENTS = [
      { id: 1, title: "JS Dev Conference", date: "2025-08-22", startTime: "10:00", endTime: "17:00", location: "Mumbai", category: "Conference" },
      { id: 2, title: "React Workshop – Hooks Deep Dive", date: "2025-08-20", startTime: "09:30", endTime: "12:30", location: "Hyderabad", category: "Workshop" },
      { id: 3, title: "Design Meetup: UI/UX Night", date: "2025-08-24", startTime: "18:00", endTime: "20:00", location: "Bengaluru", category: "Meetup" },
      { id: 4, title: "Data Science Webinar: GenAI 101", date: "2025-08-21", startTime: "19:00", endTime: "20:00", location: "Online", category: "Webinar" },
      { id: 5, title: "Summer Music Festival", date: "2025-09-05", startTime: "16:00", endTime: "23:00", location: "Pune", category: "Festival" },
      { id: 6, title: "Cloud Summit India", date: "2025-07-12", startTime: "10:00", endTime: "16:00", location: "Delhi", category: "Conference" },
      { id: 7, title: "Open Source Meetup", date: "2025-08-20", startTime: "14:00", endTime: "16:00", location: "Chennai", category: "Meetup" },
      { id: 8, title: "Python Workshop: FastAPI", date: "2025-08-28", startTime: "11:00", endTime: "15:00", location: "Online", category: "Workshop" },
      { id: 9, title: "Startup Pitch Night", date: "2025-08-27", startTime: "17:30", endTime: "20:30", location: "Ahmedabad", category: "Meetup" },
      { id: 10, title: "Kubernetes Day", date: "2025-08-18", startTime: "09:00", endTime: "17:00", location: "Kolkata", category: "Conference" }
    ];

    // --- Utilities ---
    const $ = (sel) => document.querySelector(sel);
    const fmtDate = (iso) => new Intl.DateTimeFormat(undefined, { dateStyle: 'medium' }).format(new Date(iso + 'T00:00:00'));

    function normalizeTime(t) {
      // Ensure HH:mm; allow "" or undefined
      if (!t) return '';
      const [h, m = '00'] = t.split(':');
      return `${h.padStart(2, '0')}:${m.padStart(2, '0')}`;
    }

    function withinSingleDay(evDate, selected) {
      return evDate === selected;
    }

    function withinRange(evDate, start, end) {
      if (start && evDate < start) return false;
      if (end && evDate > end) return false;
      return true;
    }

    function statusOf(evDate) {
      const today = new Date();
      const todayISO = today.toISOString().slice(0,10);
      if (evDate < todayISO) return 'past';
      return 'upcoming';
    }

    // --- State ---
    const state = {
      mode: 'single', // 'single' | 'range'
      date: '',
      startDate: '',
      endDate: '',
      q: '',
      category: '',
      status: ''
    };

    // --- Elements ---
    const tbody = $('#tbody');
    const countEl = $('#count');
    const emptyEl = $('#empty');

    // --- Rendering ---
    function render(events) {
      // Sort by date asc, then time
      const sorted = [...events].sort((a,b) => (a.date.localeCompare(b.date)) || (normalizeTime(a.startTime).localeCompare(normalizeTime(b.startTime))));

      tbody.innerHTML = '';
      if (sorted.length === 0) {
        emptyEl.style.display = 'block';
        countEl.textContent = '0 events';
        return;
      }
      emptyEl.style.display = 'none';

      for (const ev of sorted) {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${fmtDate(ev.date)}</td>
          <td><strong>${ev.title}</strong></td>
          <td>${normalizeTime(ev.startTime)}${ev.endTime ? ' – ' + normalizeTime(ev.endTime) : ''}</td>
          <td>${ev.location}</td>
          <td><span class="chip">${ev.category}</span></td>
        `;
        tbody.appendChild(tr);
      }
      countEl.textContent = `${sorted.length} event${sorted.length>1?'s':''}`;
    }

    function applyFilters() {
      const { mode, date, startDate, endDate, q, category, status } = state;
      const qlc = q.trim().toLowerCase();

      const filtered = SAMPLE_EVENTS.filter(ev => {
        const d = ev.date; // ISO YYYY-MM-DD

        // Date logic
        let dateOk = true;
        if (mode === 'single' && date) dateOk = withinSingleDay(d, date);
        if (mode === 'range') dateOk = withinRange(d, startDate || null, endDate || null);

        if (!dateOk) return false;

        // Text search (title + location)
        if (qlc) {
          const hay = `${ev.title} ${ev.location}`.toLowerCase();
          if (!hay.includes(qlc)) return false;
        }

        // Category
        if (category && ev.category !== category) return false;

        // Status
        if (status) {
          if (statusOf(d) !== status) return false;
        }
        return true;
      });

      render(filtered);
    }

    // --- Wire up controls ---
    function initControls() {
      const modeSingle = $('#mode-single');
      const modeRange  = $('#mode-range');

      function setMode(m) {
        state.mode = m;
        modeSingle.classList.toggle('active', m === 'single');
        modeSingle.setAttribute('aria-selected', m === 'single');
        modeRange.classList.toggle('active', m === 'range');
        modeRange.setAttribute('aria-selected', m === 'range');
        // Toggle fields
        $('#field-single').style.display = (m === 'single') ? '' : 'none';
        $('#field-start').style.display  = (m === 'range')  ? '' : 'none';
        $('#field-end').style.display    = (m === 'range')  ? '' : 'none';
        applyFilters();
      }

      modeSingle.addEventListener('click', () => setMode('single'));
      modeRange.addEventListener('click',  () => setMode('range'));

      // Inputs
      $('#date').addEventListener('input', (e) => { state.date = e.target.value; applyFilters(); });
      $('#startDate').addEventListener('input', (e) => { state.startDate = e.target.value; applyFilters(); });
      $('#endDate').addEventListener('input', (e) => { state.endDate = e.target.value; applyFilters(); });
      $('#q').addEventListener('input', (e) => { state.q = e.target.value; applyFilters(); });
      $('#category').addEventListener('change', (e) => { state.category = e.target.value; applyFilters(); });
      $('#status').addEventListener('change', (e) => { state.status = e.target.value; applyFilters(); });

      // Buttons
      $('#clearBtn').addEventListener('click', () => {
        state.date = state.startDate = state.endDate = state.q = '';
        state.category = state.status = '';
        $('#date').value = '';
        $('#startDate').value = '';
        $('#endDate').value = '';
        $('#q').value = '';
        $('#category').value = '';
        $('#status').value = '';
        setMode('single');
        applyFilters();
      });

      $('#todayBtn').addEventListener('click', () => {
        const todayISO = new Date().toISOString().slice(0,10);
        state.mode = 'single';
        $('#mode-single').classList.add('active');
        $('#mode-range').classList.remove('active');
        $('#field-single').style.display = '';
        $('#field-start').style.display = 'none';
        $('#field-end').style.display = 'none';
        state.date = todayISO; $('#date').value = todayISO;
        applyFilters();
      });

      // Preselect today on load for a nice demo
      const todayISO = new Date().toISOString().slice(0,10);
      state.date = todayISO; document.getElementById('date').value = todayISO;
    }

    // --- Initialize ---
    initControls();
    render(SAMPLE_EVENTS);
    applyFilters();
  </script>
</body>
</html>
